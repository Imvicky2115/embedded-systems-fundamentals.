# embedded-systems-fundamentals.
Notes and concepts on embedded systems: MCU boot flow, memory, interrupts, timers, PWM, ADC, drivers, and communication protocols.

Initial commit: Embedded systems fundamentals overview
---

## MCU Boot Process
- Power is applied to MCU
- Reset occurs
- MCU reads reset vector from Flash
- Startup code initializes stack and memory
- main() function is called

---

## Flash vs RAM
- Flash stores firmware and constants
- RAM stores variables, stack, buffers
- Code executes from Flash
- MCU uses RAM as working memory

---

## Interrupts
- Interrupts are hardware events
- MCU pauses current execution
- Jumps to ISR using vector table
- ISR handles the event quickly

---

## Timers
- Timers are hardware counters
- Used for time measurement
- Generate interrupts
- Used for PWM and scheduling

---

## PWM
- MCU pins are digital
- PWM simulates analog control
- Generated using timers
- Used for motor speed, LED brightness

---

## ADC
- Converts analog voltage to digital value
- Implemented in hardware
- Software configures and reads ADC

---

## Drivers (Hardware & Software)

Drivers act as the bridge between application logic and hardware.

### Hardware Drivers
- Hardware drivers handle high voltage and high current
- Examples: Transistors, MOSFETs, motor driver ICs, relays
- Protect MCU pins from overload
- Provide isolation and safety

### Software Drivers
- Software drivers configure and control hardware peripherals
- Abstract low-level register details
- Provide clean APIs to application code

Example:
- Application says: set motor speed to 60%
- Driver converts this to PWM duty cycle
- Hardware driver powers the motor safely

---

## Interrupts (Detailed)

- Interrupts are hardware-generated events
- They allow MCU to respond immediately to external or internal events
- Examples: button press, timer overflow, ADC conversion complete

### Interrupt Flow
1. Hardware event occurs
2. MCU pauses current execution
3. CPU state is saved to stack (RAM)
4. Interrupt Vector Table (IVT) is consulted
5. Corresponding ISR is executed
6. MCU returns to previous execution

Interrupts enable real-time behavior without blocking the CPU.

---

## Interrupt Vector Table (IVT)

- IVT is stored in Flash memory
- Contains addresses of ISR functions
- Each interrupt source has a fixed entry
- MCU uses IVT to know which ISR to jump to

IVT does not contain code, only function addresses.

---

## Timers (Why They Exist)

- MCU has no natural sense of time
- Timers are hardware counters driven by clock
- Used for:
  - Accurate delays
  - Periodic tasks
  - Scheduling
  - PWM generation
  - Time measurement

Timers allow non-blocking design where CPU remains free.

---

## PWM (Pulse Width Modulation)

- MCU pins are digital (ON/OFF only)
- PWM simulates analog control using fast switching
- Duty cycle controls average power
- Generated by hardware timers

Used for:
- Motor speed control
- LED brightness
- Power regulation

PWM signal is sent to driver circuits, not directly to actuators.

---

## Flash vs RAM

### Flash Memory
- Non-volatile
- Stores firmware code
- Stores constants
- Stores interrupt vector table
- Code executes directly from Flash

### RAM
- Volatile
- Stores variables
- Stores stack and heap
- Stores buffers and flags
- Used as working memory

MCU executes code from Flash but operates on data in RAM.

---

## Memory Sections

### .text
- Program instructions
- Stored in Flash

### .data
- Initialized global/static variables
- Copied from Flash to RAM by startup code

### .bss
- Uninitialized global/static variables
- Cleared to zero by startup code

### Stack
- Used for function calls and interrupts
- Grows/shrinks automatically

### Heap
- Used for dynamic memory allocation
- Often avoided in embedded systems

- ## Startup Code

Startup code runs before `main()` and prepares the system for C execution.

Responsibilities:
- Set stack pointer
- Initialize clock (if required)
- Copy `.data` from Flash to RAM
- Clear `.bss` section
- Call `main()`

Startup code is usually provided by MCU vendor and toolchain.

---

## Reset Vector

- Reset vector is a fixed memory location in Flash
- Contains address of reset handler
- MCU jumps here immediately after reset
- Entry point of firmware execution

- Without reset vector, MCU does not know where to start.

---

## What C Language Expects from MCU

C language assumes:
- Valid stack exists
- Global variables are initialized
- Memory is readable and writable
- Entry point (`main`) is called correctly

Startup code creates this environment on bare-metal systems.

---

## Communication Protocols (Overview)

Communication protocols allow MCU to talk with peripheral.

# UART
- Asynchronous serial communication
- Uses TX and RX lines
- Commonly used for debugging and modules

### I2C
- Two-wire synchronous protocol
- Supports multiple devices using addresses
- Used for sensors and low-speed peripherals

### SPI
- High-speed synchronous protocol
- Uses separate data and clock lines
- Used for displays, memory, and fast devices

Protocols are implemented in hardware but controlled by software drivers.

---

## Role of Embedded Software Engineer
An embedded software engineer:
- Writes firmware in C/C++
- Configures hardware peripherals
- Handles interrupts and timers
- Writes and maintains drivers
- Debugs hardwareâ€“software interaction
- Designs reliable real-time systems

Hardware exists already; software brings it to life.

---

## Summary

An embedded system works by:
- Executing firmware from Flash
- Using RAM as working memory
- Responding to interrupts in real time
- Reading sensors via ADC
- Controlling actuators via PWM and drivers
- Communicating using standard protocols

  Understanding these fundamentals is essential.
